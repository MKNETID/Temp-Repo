name: Get Latest Forks (No Python)

on:
  schedule:
    - cron: '0 0 * * *' # Berjalan setiap jam 00:00 UTC
  workflow_dispatch: # Tombol manual untuk testing

jobs:
  check-forks:
    runs-on: ubuntu-latest
    
    steps:
      - name: Fetch and Extract Forks
        run: |
          echo "Mengambil data dari GitHub..."
          
          # 1. Download halaman HTML
          # 2. Cari link repository yang mengandung pola fork
          # 3. Ambil 5 baris unik pertama
          # 4. Bersihkan tag HTML untuk mendapatkan nama dan link
          
          URL="https://github.com/SteamAutoCracks/ManifestHub/forks?include=active&page=1&period=2y&sort_by=last_updated"
          
          curl -s -L $URL | \
          grep -oP '(?<=href="/)[^/]+/[^/]+(?=" data-hovercard-type="repository")' | \
          head -n 5 > latest_forks.txt

          echo "--- 5 REPO TERUPDATE ---"
          while read repo; do
            echo "Repository: $repo"
            echo "URL: https://github.com/$repo"
            echo "------------------------"
          done < latest_forks.txt

      - name: Save Result (Optional)
        uses: actions/upload-artifact@v4
        with:
          name: fork-list
          path: latest_forks.txt
